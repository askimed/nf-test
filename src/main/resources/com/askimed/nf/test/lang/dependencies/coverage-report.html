<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.21/css/jquery.dataTables.min.css">
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.21/js/jquery.dataTables.min.js"></script>
    <script>
        \$(document).ready(function() {
            \$('#fileTable').DataTable({
                "pageLength": 50
            });
        });
    </script>
</head>
<body>
<div class="container">
    <h1>Coverage Report</h1>
    <p>This report was generated by <a href="https://www.nf-test.com">nf-test</a> on <%= new Date() %>.</p>
    <p>
        Coverage:  <span class="badge <%= coverage.getCoverage() < 0.5 ? 'badge-danger' : (coverage.getCoverage() < 0.9 ? 'badge-warning' : 'badge-success') %>"><%= coverage.formatCoverage(coverage.getCoverage()) %></span>
    </p>

    <div class="progress bg-danger">
        <div class="progress-bar bg-success" role="progressbar" style="width: <%= coverage.formatCoverage(coverage.getCoverage()) %>;" aria-valuenow="<%= coverage.formatCoverage(coverage.getCoverage()) %>" aria-valuemin="0" aria-valuemax="100"></div>
    </div>

    <hr>

    <table id="fileTable" class="table table-bordered table-striped table-sm">
        <thead>
        <tr>
            <th>File</th>
            <th>Covered</th>
        </tr>
        </thead>
        <tbody>
        <% coverage.items.each { item -> %>
        <tr class="<%= item.isCovered() ? 'table-success' : 'table-danger' %>">
            <td><%= coverage.getFileLabel(item.getFile()) %></td>
            <td><%= item.isCovered() %></td>
        </tr>
        <% } %>
        </tbody>
    </table>
</div>
</body>
</html>